@page "{EmployeeId:int?}"
@using Domain
@using Manager
@inject IDepartmentManager m_Department
@model Employee_Management_System.Pages.EmployeeCRUD.EmployeeDeleteInformationModel
@{
}
<h2> Employee Information</h2>
@{
    var isUpdateMode = Model.NewEmployee.Id > 0; // Check if the employee already exists for an update
    var department = m_Department.GetDepartmentById(Model.NewEmployee.DepartmentId);
    var departmentName = department.DepartmentName;
}



<div class="card">
    <div class="card-body">
        <form method="post">
            <input type="hidden" name="NewEmployee.Id" value="@Model.NewEmployee.Id" />
            <div class="form-group">
                <label for="Name">Name</label>
                <input type="text" class="form-control" id="Name" name="NewEmployee.Name" value="@Model.NewEmployee.Name" readonly />
            </div>

            <div class="form-group">
                <label for="Email">Email</label>
                <input type="email" class="form-control" id="Email" name="NewEmployee.Email" value="@Model.NewEmployee.Email" readonly />
            </div>

            <div class="form-group">
                <label for="Position">Position</label>
                <input type="text" class="form-control" id="Position" name="NewEmployee.Position" value="@Model.NewEmployee.Position" readonly />
            </div>
            
            <div class="form-group">
                <label for="DepartmentId">Department</label>
                <input type="text" class="form-control" id="DepartmentId" value="@departmentName" readonly />
            </div>


            @if (!Model.NewEmployee.Deleted)
            {
                <form method="post">
                    <input type="hidden" name="NewEmployee.Deleted" value="true" />
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
            }
            
        </form>
    </div>
</div>
